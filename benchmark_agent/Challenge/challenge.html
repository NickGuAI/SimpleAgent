<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUI Component Challenge Suite</title>
    <style>
        :root {
            --primary-color: #1976d2;
            --secondary-color: #dc004e;
            --background-color: #f5f5f5;
            --surface-color: #ffffff;
            --success-color: #4caf50;
            --error-color: #f44336;
            --text-primary: rgba(0, 0, 0, 0.87);
            --text-secondary: rgba(0, 0, 0, 0.6);
            --divider: rgba(0, 0, 0, 0.12);
            --shadow-1: 0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12);
            --shadow-2: 0px 3px 3px -2px rgba(0,0,0,0.2), 0px 3px 4px 0px rgba(0,0,0,0.14), 0px 1px 8px 0px rgba(0,0,0,0.12);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--background-color);
        }

        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary-color), #1565c0);
            color: white;
            padding: 24px;
            box-shadow: var(--shadow-2);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        h1 {
            font-size: 2rem;
            font-weight: 400;
            letter-spacing: -0.5px;
        }

        .stats-container {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .stat-box {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .stat-label {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 500;
        }

        /* Search Bar */
        .search-container {
            position: relative;
            width: 100%;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 12px 48px 12px 16px;
            border: none;
            border-radius: 24px;
            background-color: rgba(255, 255, 255, 0.9);
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
            transition: box-shadow 0.3s ease;
        }

        .search-input:focus {
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
        }

        .search-icon {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        /* Main Layout */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 24px;
            padding: 24px;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            background-color: var(--surface-color);
            border-radius: 8px;
            box-shadow: var(--shadow-1);
            padding: 16px;
            position: sticky;
            top: 120px;
            height: fit-content;
            max-height: calc(100vh - 144px);
            overflow-y: auto;
        }

        .category-nav {
            list-style: none;
        }

        .category-item {
            margin-bottom: 4px;
        }

        .category-link {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            border-radius: 8px;
            color: var(--text-primary);
            text-decoration: none;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .category-link:hover {
            background-color: rgba(25, 118, 210, 0.08);
            color: var(--primary-color);
        }

        .category-link.active {
            background-color: rgba(25, 118, 210, 0.12);
            color: var(--primary-color);
            font-weight: 500;
        }

        .category-count {
            background-color: var(--background-color);
            color: var(--text-secondary);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.875rem;
        }

        .category-link.active .category-count {
            background-color: var(--primary-color);
            color: white;
        }

        /* Content Area */
        .content {
            flex: 1;
            min-width: 0;
        }

        .category-section {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .category-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .category-header {
            margin-bottom: 24px;
        }

        .category-title {
            font-size: 1.75rem;
            font-weight: 400;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .category-description {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Component Grid */
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
        }

        .component-card {
            background-color: var(--surface-color);
            border-radius: 8px;
            box-shadow: var(--shadow-1);
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .component-card:hover {
            box-shadow: var(--shadow-2);
            transform: translateY(-2px);
        }

        .component-card.completed {
            border-left: 4px solid var(--success-color);
        }

        .component-card.completed::after {
            content: '✓';
            position: absolute;
            top: 8px;
            right: 8px;
            width: 24px;
            height: 24px;
            background-color: var(--success-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }

        .component-name {
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .component-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 12px;
        }

        .component-stats {
            display: flex;
            gap: 16px;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .test-count {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Results Modal */
        .results-modal {
            display: none;
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 24px;
        }

        .results-content {
            background-color: var(--surface-color);
            border-radius: 8px;
            box-shadow: var(--shadow-2);
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 24px;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .results-title {
            font-size: 1.5rem;
            font-weight: 400;
        }

        .close-button {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-secondary);
            padding: 4px;
        }

        .test-results {
            list-style: none;
        }

        .test-result {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .test-result.pass {
            background-color: rgba(76, 175, 80, 0.1);
            color: var(--success-color);
        }

        .test-result.fail {
            background-color: rgba(244, 67, 54, 0.1);
            color: var(--error-color);
        }

        /* Challenge Frame */
        .challenge-frame {
            display: none;
            position: fixed;
            inset: 0;
            background-color: var(--background-color);
            z-index: 3000;
        }

        .challenge-header {
            background-color: var(--surface-color);
            box-shadow: var(--shadow-1);
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .challenge-title {
            font-size: 1.25rem;
            font-weight: 500;
        }

        .challenge-iframe {
            width: 100%;
            height: calc(100% - 64px);
            border: none;
        }

        .back-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-button:hover {
            background-color: #1565c0;
        }

        /* Responsive Design */
        @media (max-width: 960px) {
            .main-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                position: static;
                max-height: none;
            }

            .header-content {
                flex-direction: column;
                align-items: stretch;
            }

            .search-container {
                max-width: 100%;
            }

            .stats-container {
                justify-content: center;
            }
        }

        @media (max-width: 600px) {
            .component-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.5rem;
            }

            .stat-box {
                padding: 6px 12px;
            }

            .stat-value {
                font-size: 1.25rem;
            }
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 48px;
            color: var(--text-secondary);
        }

        .loading::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0%, 20% {
                content: '';
            }
            40% {
                content: '.';
            }
            60% {
                content: '..';
            }
            80%, 100% {
                content: '...';
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1>MUI Component Challenge Suite</h1>
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="Search components..." />
                <span class="search-icon">🔍</span>
            </div>
            <div class="stats-container">
                <div class="stat-box">
                    <div class="stat-label">Total Components</div>
                    <div class="stat-value" id="totalComponents">57</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Completed</div>
                    <div class="stat-value" id="completedComponents">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Tests Passed</div>
                    <div class="stat-value" id="testsPassedDisplay">0/0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Progress</div>
                    <div class="stat-value" id="progressPercentage">0%</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <nav>
                <ul class="category-nav" id="categoryNav">
                    <li class="category-item">
                        <a href="#inputs" class="category-link active" data-category="inputs">
                            <span>Input Components</span>
                            <span class="category-count">13</span>
                        </a>
                    </li>
                    <li class="category-item">
                        <a href="#data-display" class="category-link" data-category="data-display">
                            <span>Data Display</span>
                            <span class="category-count">9</span>
                        </a>
                    </li>
                    <li class="category-item">
                        <a href="#feedback" class="category-link" data-category="feedback">
                            <span>Feedback</span>
                            <span class="category-count">6</span>
                        </a>
                    </li>
                    <li class="category-item">
                        <a href="#surfaces" class="category-link" data-category="surfaces">
                            <span>Surfaces</span>
                            <span class="category-count">4</span>
                        </a>
                    </li>
                    <li class="category-item">
                        <a href="#navigation" class="category-link" data-category="navigation">
                            <span>Navigation</span>
                            <span class="category-count">9</span>
                        </a>
                    </li>
                    <li class="category-item">
                        <a href="#layout" class="category-link" data-category="layout">
                            <span>Layout</span>
                            <span class="category-count">5</span>
                        </a>
                    </li>
                    <li class="category-item">
                        <a href="#utils" class="category-link" data-category="utils">
                            <span>Utilities</span>
                            <span class="category-count">8</span>
                        </a>
                    </li>
                    <li class="category-item">
                        <a href="#lab" class="category-link" data-category="lab">
                            <span>Lab (Experimental)</span>
                            <span class="category-count">3</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Content Area -->
        <main class="content" id="mainContent">
            <!-- Input Components -->
            <section class="category-section active" id="inputs-section">
                <div class="category-header">
                    <h2 class="category-title">Input Components</h2>
                    <p class="category-description">Components for capturing user input through various interaction patterns</p>
                </div>
                <div class="component-grid" id="inputs-grid">
                    <!-- Component cards will be dynamically inserted here -->
                </div>
            </section>

            <!-- Data Display Components -->
            <section class="category-section" id="data-display-section">
                <div class="category-header">
                    <h2 class="category-title">Data Display Components</h2>
                    <p class="category-description">Components for presenting and organizing information</p>
                </div>
                <div class="component-grid" id="data-display-grid">
                    <!-- Component cards will be dynamically inserted here -->
                </div>
            </section>

            <!-- Feedback Components -->
            <section class="category-section" id="feedback-section">
                <div class="category-header">
                    <h2 class="category-title">Feedback Components</h2>
                    <p class="category-description">Components for providing user feedback and status information</p>
                </div>
                <div class="component-grid" id="feedback-grid">
                    <!-- Component cards will be dynamically inserted here -->
                </div>
            </section>

            <!-- Surface Components -->
            <section class="category-section" id="surfaces-section">
                <div class="category-header">
                    <h2 class="category-title">Surface Components</h2>
                    <p class="category-description">Container components that provide depth and structure</p>
                </div>
                <div class="component-grid" id="surfaces-grid">
                    <!-- Component cards will be dynamically inserted here -->
                </div>
            </section>

            <!-- Navigation Components -->
            <section class="category-section" id="navigation-section">
                <div class="category-header">
                    <h2 class="category-title">Navigation Components</h2>
                    <p class="category-description">Components for navigating between views and content</p>
                </div>
                <div class="component-grid" id="navigation-grid">
                    <!-- Component cards will be dynamically inserted here -->
                </div>
            </section>

            <!-- Layout Components -->
            <section class="category-section" id="layout-section">
                <div class="category-header">
                    <h2 class="category-title">Layout Components</h2>
                    <p class="category-description">Components for structuring and arranging content</p>
                </div>
                <div class="component-grid" id="layout-grid">
                    <!-- Component cards will be dynamically inserted here -->
                </div>
            </section>

            <!-- Utility Components -->
            <section class="category-section" id="utils-section">
                <div class="category-header">
                    <h2 class="category-title">Utility Components</h2>
                    <p class="category-description">Helper components for common UI patterns</p>
                </div>
                <div class="component-grid" id="utils-grid">
                    <!-- Component cards will be dynamically inserted here -->
                </div>
            </section>

            <!-- Lab Components -->
            <section class="category-section" id="lab-section">
                <div class="category-header">
                    <h2 class="category-title">Lab Components (Experimental)</h2>
                    <p class="category-description">Experimental components that may change in future releases</p>
                </div>
                <div class="component-grid" id="lab-grid">
                    <!-- Component cards will be dynamically inserted here -->
                </div>
            </section>
        </main>
    </div>

    <!-- Challenge Frame -->
    <div class="challenge-frame" id="challengeFrame">
        <div class="challenge-header">
            <h2 class="challenge-title" id="challengeTitle">Component Challenge</h2>
            <button class="back-button" onclick="closeChallengeFrame()">
                <span>←</span>
                <span>Back to List</span>
            </button>
        </div>
        <iframe class="challenge-iframe" id="challengeIframe"></iframe>
    </div>

    <!-- Results Modal -->
    <div class="results-modal" id="resultsModal">
        <div class="results-content">
            <div class="results-header">
                <h2 class="results-title">Test Results</h2>
                <button class="close-button" onclick="closeResultsModal()">×</button>
            </div>
            <ul class="test-results" id="testResults">
                <!-- Test results will be dynamically inserted here -->
            </ul>
        </div>
    </div>

    <script>
        // Component data structure
        const componentData = {
            'inputs': [
                { name: 'Autocomplete', file: 'autocomplete.html', description: 'Combo box with suggestions and filtering', tests: 7 },
                { name: 'Button', file: 'button.html', description: 'Basic clickable element for actions', tests: 6 },
                { name: 'Button Group', file: 'button-group.html', description: 'Group of related buttons', tests: 8 },
                { name: 'Checkbox', file: 'checkbox.html', description: 'Binary choice input', tests: 7 },
                { name: 'Floating Action Button', file: 'fab.html', description: 'Circular button for primary actions', tests: 8 },
                { name: 'Radio Group', file: 'radio-group.html', description: 'Single selection from multiple options', tests: 7 },
                { name: 'Rating', file: 'rating.html', description: 'Star rating input', tests: 8 },
                { name: 'Select', file: 'select.html', description: 'Dropdown selection input', tests: 7 },
                { name: 'Slider', file: 'slider.html', description: 'Range selection input', tests: 8 },
                { name: 'Switch', file: 'switch.html', description: 'Toggle between two states', tests: 7 },
                { name: 'Text Field', file: 'textfield.html', description: 'Text input with various options', tests: 7 },
                { name: 'Toggle Button', file: 'toggle-button.html', description: 'Selection from toggle options', tests: 8 },
                { name: 'Transfer List', file: 'transfer-list.html', description: 'Move items between lists', tests: 6 }
            ],
            'data-display': [
                { name: 'Avatar', file: 'avatar.html', description: 'User representation with image or initials', tests: 6 },
                { name: 'Badge', file: 'badge.html', description: 'Small count and labeling component', tests: 6 },
                { name: 'Chip', file: 'chip.html', description: 'Compact elements representing input or attribute', tests: 6 },
                { name: 'Divider', file: 'divider.html', description: 'Thin line to separate content', tests: 6 },
                { name: 'Icons', file: 'icons.html', description: 'Material Design icons', tests: 6 },
                { name: 'List', file: 'list.html', description: 'Continuous vertical index of items', tests: 6 },
                { name: 'Table', file: 'table.html', description: 'Data table with sorting and selection', tests: 6 },
                { name: 'Tooltip', file: 'tooltip.html', description: 'Informative text on hover', tests: 6 },
                { name: 'Typography', file: 'typography.html', description: 'Text styles and formatting', tests: 6 }
            ],
            'feedback': [
                { name: 'Alert', file: 'alert.html', description: 'Display brief messages', tests: 6 },
                { name: 'Backdrop', file: 'backdrop.html', description: 'Overlay for focus emphasis', tests: 6 },
                { name: 'Dialog', file: 'dialog.html', description: 'Modal window for user interaction', tests: 6 },
                { name: 'Progress', file: 'progress.html', description: 'Loading and progress indicators', tests: 6 },
                { name: 'Skeleton', file: 'skeleton.html', description: 'Loading placeholder shapes', tests: 6 },
                { name: 'Snackbar', file: 'snackbar.html', description: 'Brief notification messages', tests: 6 }
            ],
            'surfaces': [
                { name: 'Accordion', file: 'accordion.html', description: 'Expandable content panels', tests: 6 },
                { name: 'App Bar', file: 'appbar.html', description: 'Top navigation and actions', tests: 6 },
                { name: 'Card', file: 'card.html', description: 'Content container with actions', tests: 6 },
                { name: 'Paper', file: 'paper.html', description: 'Physical sheet with elevation', tests: 6 }
            ],
            'navigation': [
                { name: 'Bottom Navigation', file: 'bottom-navigation.html', description: 'Mobile navigation bar', tests: 6 },
                { name: 'Breadcrumbs', file: 'breadcrumbs.html', description: 'Navigation path indicator', tests: 6 },
                { name: 'Drawer', file: 'drawer.html', description: 'Slide-out navigation panel', tests: 6 },
                { name: 'Link', file: 'link.html', description: 'Text hyperlinks', tests: 6 },
                { name: 'Menu', file: 'menu.html', description: 'Dropdown list of options', tests: 6 },
                { name: 'Pagination', file: 'pagination.html', description: 'Page navigation controls', tests: 6 },
                { name: 'Speed Dial', file: 'speed-dial.html', description: 'Floating action button with actions', tests: 6 },
                { name: 'Stepper', file: 'stepper.html', description: 'Multi-step process indicator', tests: 6 },
                { name: 'Tabs', file: 'tabs.html', description: 'Tabbed interface navigation', tests: 6 }
            ],
            'layout': [
                { name: 'Box', file: 'box.html', description: 'Basic layout building block', tests: 6 },
                { name: 'Container', file: 'container.html', description: 'Responsive fixed width container', tests: 6 },
                { name: 'Grid', file: 'grid.html', description: 'Responsive grid layout system', tests: 6 },
                { name: 'Stack', file: 'stack.html', description: 'One-dimensional layout helper', tests: 6 },
                { name: 'Image List', file: 'image-list.html', description: 'Grid list for images', tests: 6 }
            ],
            'utils': [
                { name: 'Click Away Listener', file: 'click-away-listener.html', description: 'Detect clicks outside element', tests: 6 },
                { name: 'Modal', file: 'modal.html', description: 'Overlay dialog foundation', tests: 6 },
                { name: 'No SSR', file: 'no-ssr.html', description: 'Client-side only rendering', tests: 6 },
                { name: 'Popover', file: 'popover.html', description: 'Floating content container', tests: 6 },
                { name: 'Popper', file: 'popper.html', description: 'Positioning engine for tooltips', tests: 6 },
                { name: 'Portal', file: 'portal.html', description: 'Render children outside DOM hierarchy', tests: 6 },
                { name: 'Textarea Autosize', file: 'textarea-autosize.html', description: 'Auto-resizing text area', tests: 6 },
                { name: 'Transitions', file: 'transitions.html', description: 'Animation transition components', tests: 6 }
            ],
            'lab': [
                { name: 'Timeline', file: 'timeline.html', description: 'Vertical timeline display', tests: 5 },
                { name: 'Tree View', file: 'tree-view.html', description: 'Hierarchical list with expansion', tests: 5 },
                { name: 'Date/Time Pickers', file: 'date-time-pickers.html', description: 'Date and time selection', tests: 6 }
            ]
        };

        // State management
        let currentCategory = 'inputs';
        let completedComponents = new Set();
        let componentTestResults = {}; // Format: { 'category/file.html': { passed: 5, total: 8 } }
        let searchTerm = '';

        // Load saved progress
        function loadProgress() {
            const saved = localStorage.getItem('mui-challenge-progress');
            const savedTestResults = localStorage.getItem('mui-challenge-test-results');
            if (saved) {
                completedComponents = new Set(JSON.parse(saved));
            }
            if (savedTestResults) {
                componentTestResults = JSON.parse(savedTestResults);
            }
            updateStats();
            renderAllCategories();
        }

        // Save progress
        function saveProgress() {
            localStorage.setItem('mui-challenge-progress', JSON.stringify([...completedComponents]));
            localStorage.setItem('mui-challenge-test-results', JSON.stringify(componentTestResults));
        }

        // Update statistics
        function updateStats() {
            const total = Object.values(componentData).reduce((sum, cat) => sum + cat.length, 0);
            const completed = completedComponents.size;
            
            // Calculate total tests and tests passed
            let totalTests = 0;
            let testsPassed = 0;
            
            Object.values(componentData).forEach(category => {
                category.forEach(component => {
                    totalTests += component.tests;
                });
            });
            
            Object.values(componentTestResults).forEach(result => {
                testsPassed += result.passed;
            });
            
            const percentage = totalTests > 0 ? Math.round((testsPassed / totalTests) * 100) : 0;
            
            document.getElementById('totalComponents').textContent = total;
            document.getElementById('completedComponents').textContent = completed;
            document.getElementById('testsPassedDisplay').textContent = `${testsPassed}/${totalTests}`;
            document.getElementById('progressPercentage').textContent = `${percentage}%`;
        }

        // Render component cards
        function renderComponentCards(category) {
            const grid = document.getElementById(`${category}-grid`);
            if (!grid) return;
            
            grid.innerHTML = '';
            const components = componentData[category] || [];
            
            components.forEach(component => {
                const componentId = `${category}/${component.file}`;
                const isCompleted = completedComponents.has(componentId);
                
                // Apply search filter
                if (searchTerm && !component.name.toLowerCase().includes(searchTerm.toLowerCase())) {
                    return;
                }
                
                const card = document.createElement('div');
                card.className = `component-card ${isCompleted ? 'completed' : ''}`;
                card.onclick = () => openChallenge(category, component);
                
                const testResult = componentTestResults[componentId] || { passed: 0, total: component.tests };
                const testProgress = testResult.total > 0 ? Math.round((testResult.passed / testResult.total) * 100) : 0;
                
                card.innerHTML = `
                    <div class="component-name">${component.name}</div>
                    <div class="component-description">${component.description}</div>
                    <div class="component-stats">
                        <div class="test-count">
                            <span>🧪</span>
                            <span>${testResult.passed}/${testResult.total} tests</span>
                        </div>
                        ${isCompleted ? 
                            `<span style="color: var(--success-color);">✓ ${testProgress}% Complete</span>` : 
                            testResult.passed > 0 ? 
                                `<span style="color: var(--primary-color);">${testProgress}% In Progress</span>` : 
                                '<span style="color: var(--text-secondary);">Not started</span>'
                        }
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // Render all categories
        function renderAllCategories() {
            Object.keys(componentData).forEach(category => {
                renderComponentCards(category);
            });
        }

        // Category navigation
        function switchCategory(category) {
            currentCategory = category;
            
            // Update navigation
            document.querySelectorAll('.category-link').forEach(link => {
                link.classList.toggle('active', link.dataset.category === category);
            });
            
            // Update sections
            document.querySelectorAll('.category-section').forEach(section => {
                section.classList.toggle('active', section.id === `${category}-section`);
            });
        }

        // Open challenge
        function openChallenge(category, component) {
            const frame = document.getElementById('challengeFrame');
            const iframe = document.getElementById('challengeIframe');
            const title = document.getElementById('challengeTitle');
            
            title.textContent = `${component.name} Challenge`;
            iframe.src = `src/${category}/${component.file}`;
            frame.style.display = 'block';
            
            // Listen for completion messages
            window.addEventListener('message', function handleMessage(event) {
                const componentId = `${category}/${component.file}`;
                
                if (event.data.type === 'challengeComplete' && event.data.challenge === component.file.replace('.html', '')) {
                    completedComponents.add(componentId);
                    
                    // Update test results if provided
                    if (event.data.testsPassed !== undefined && event.data.totalTests !== undefined) {
                        componentTestResults[componentId] = {
                            passed: event.data.testsPassed,
                            total: event.data.totalTests
                        };
                    } else {
                        // If no test data provided, assume all tests passed
                        componentTestResults[componentId] = {
                            passed: component.tests,
                            total: component.tests
                        };
                    }
                    
                    saveProgress();
                    updateStats();
                    renderComponentCards(category);
                    
                    // Show success notification
                    showNotification(`${component.name} challenge completed! (${componentTestResults[componentId].passed}/${componentTestResults[componentId].total} tests passed)`);
                } else if (event.data.type === 'testUpdate' && event.data.challenge === component.file.replace('.html', '')) {
                    // Handle incremental test updates
                    componentTestResults[componentId] = {
                        passed: event.data.testsPassed,
                        total: event.data.totalTests
                    };
                    saveProgress();
                    updateStats();
                    renderComponentCards(category);
                }
            });
        }

        // Close challenge frame
        function closeChallengeFrame() {
            const frame = document.getElementById('challengeFrame');
            const iframe = document.getElementById('challengeIframe');
            
            frame.style.display = 'none';
            iframe.src = '';
        }

        // Search functionality
        function handleSearch(event) {
            searchTerm = event.target.value.toLowerCase();
            renderAllCategories();
        }

        // Show notification
        function showNotification(message) {
            // Simple notification implementation
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 24px;
                left: 50%;
                transform: translateX(-50%);
                background-color: var(--success-color);
                color: white;
                padding: 16px 24px;
                border-radius: 4px;
                box-shadow: var(--shadow-2);
                z-index: 4000;
                animation: slideUp 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Load progress
            loadProgress();
            
            // Setup navigation
            document.querySelectorAll('.category-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const category = link.dataset.category;
                    switchCategory(category);
                });
            });
            
            // Setup search
            document.getElementById('searchInput').addEventListener('input', handleSearch);
            
            // Initial render
            renderAllCategories();
            updateStats();
        });

        // Add slide up animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideUp {
                from {
                    transform: translate(-50%, 100%);
                    opacity: 0;
                }
                to {
                    transform: translate(-50%, 0);
                    opacity: 1;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>